---
sidebar_position: 4
title: 導入後の作業
---

# 導入後の作業

導入後に必要な作業としては以下のような項目があります。

- デモ画面の表示
- Orval の設定

## デモ画面の表示

:::warning 以下に当てはまる方はこの項をスキップしてください。

- デモ画面を含めるかの選択で「はい」を選択
  :::
  「導入ツール」が完了したら、作成されたディレクトリに移動し、次のコマンドを実行してください。

`npm run dev`

起動が完了後、http://localhost:3000/demo にアクセスし以下の画面が表示されれば成功です。
![デモ画面](/img/automatic-layout.png)

:::info
本サンプルアプリでは以下の条件で作成されています。

- UI コンポーネント：Antd Design,
- バリデーションライブラリ：Yup,
- API 生成方式ライブラリ：Orval

:::

## Orval の設定

:::warning 以下に当てはまる方はこの項をスキップしてください。

- API 生成方式の選択で「TanStack Query」を選択
  :::
  Orval を用いて openapi.yaml からソースコードを自動生成することができます。  
  Orval の設定手順については以下の通りです。

1. Openapi.yml をルート/openapi 配下に配置する
2. Axios のカスタムインスタンスを定義する
3. Orval.config.ts をルート直下に配置する
4. 1 ～ 3 の設定を基にコードを自動生成する

### 1. openapi.yml をルート/openapi 配下に配置する

プロジェクトで使用される openapi.yml をルート/openapi 配下に配置します。
:::info 前提条件
openapi.yml がまだない場合はサンプルアプリ（リンク）の openapi.yml をダウンロードして使用してください。
:::

### 2. Axios のカスタムインスタンスを定義する

Orval を設定するためにはカスタムインスタンスを定義する必要があります。カスタムインスタンスでは API のベース URL や API に必要な認証情報の設定などを行うことができます。

```
カスタムインスタンスのコード（公式サイトから使えそうなコードを探す）
```

### 3. Orval.config.ts をルート直下に配置する

Orval の設定ファイルを作成します。設定ファイルには input 情報（どの openapi.yaml を使用するか）と output 情報（どこに自動性正されたファイルを格納するかなど）を設定します。
Orval の設定方法については以下の通りです。

```
Orval.config.tsのコード（公式サイトから使えそうなコードを探す）
```

より詳しい設定方法については公式サイトを参考にしてください。

### 4. 1 ～ 3 の設定を基にコードを自動生成する

1~3 の設定を行うことでコードを自動生成することができます。以下のコードを実行してください。

```
npx orval --config ./orval.config.ts
```
